(function(){var a,b,c,d,e,f,g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};c=function(a){return"ResponseField"+_.str.classify(a)},b=function(a){return new(FormRenderer.Models[c(a.field_type)])(a)},d=function(a){var b;return"dropdown"===(b=a.field_type)||"checkboxes"===b||"radio"===b?_.map(a.getOptions(),function(a){return a.label}):void 0},window.Formbuilder=a=Backbone.View.extend({events:{"click .js-add-field":function(){return this.setLeft("add")},"mouseover .fb_left":"lockLeftWrapper","mouseout .fb_left":"unlockLeftWrapper","click .fb_add_field_wrapper a":"_addFieldViaClick","click [data-change-id-level]":function(){return Turbolinks.visit(window.location.pathname.replace("/response_form","/responses"))}},defaults:{selector:"[data-formbuilder]"},initialize:function(c){var d,e,f,g,h;for(this.options=$.extend({},this.defaults,c),this.state=new Backbone.Model,new a.StatusIndicatorController({fb:this}),this.setElement($(this.options.selector)),this.$el.data("formbuilder-instance",this),this.fieldsForDeletion=[],this.collection=new a.Collection(null,{parentView:this}),this.collection.bind("add",this._onCollectionAdd,this),this.listenTo(this.collection,"destroy",function(a){return a.get("id")&&this.fieldsForDeletion.push(a.get("id")),this.ensureEditPaneScrolled(),this._onChange()}),this.render(),g=this.options.bootstrapData,d=0,e=g.length;e>d;d++)h=g[d],f=b(h),this.collection.add(f,{sort:!1});return this.collection.bind("change add",this._onChange,this),this.autosaver=new Autosaver({fn:function(a){return function(b){var c;return a.isValid()?(a.collection.sort(),c=_.clone(a.fieldsForDeletion),$.ajax({url:a.options.endpoint,type:"put",data:JSON.stringify({fields:a.collection.toJSON(),fields_marked_for_deletion:c,last_updated:a.options.last_updated}),contentType:"application/json",complete:function(){return b()},error:function(b){var c,d;return a.state.set({hasServerErrors:!0}),a.trigger("refreshStatus"),c=409===b.status,DvlFlash("error",(null!=(d=b.responseJSON)?d.error:void 0)||t("flash.error.generic"),c?1e8:void 0),c?(a.saveDisabled=!0,a.autosaver.clear(),BeforeUnload.disable()):void 0},success:function(b){var d,e,f,g,h,i;for(a.options.last_updated=b.last_updated,a.state.set({hasServerErrors:!1}),a.trigger("refreshStatus"),a.fieldsForDeletion=_.difference(a.fieldsForDeletion,c),g=b.response_fields,i=[],e=0,f=g.length;f>e;e++)d=g[e],i.push(null!=(h=a.collection.get(d.cid))?h.set({id:d.id},{silent:!0}):void 0);return i}})):b()}}(this)}),this.initSortable(),this.initDraggable(),this.initBeforeUnload(),this.initLeftScroll()},render:function(){var b;return this.$el.html(JST["form_builder/templates/page"]({view:this})),this.options.identificationFields&&(b=new FormRenderer.Views.ResponseFieldIdentification({model:new FormRenderer.Models.ResponseFieldIdentification}),this.$el.find(".fb_identification_cover").after(b.render().$el),a.disableTabbing(b.$el)),this.$fbLeft=this.$el.find(".fb_left"),this.$leftAdd=this.$el.find(".fb_add_field_wrapper"),this.$leftEdit=this.$el.find(".fb_edit_field_wrapper"),this.$responseFields=this.$el.find(".fb_response_fields"),this.$el.initialize(),this},initLeftScroll:function(){var a;return a=_.debounce(function(a){return function(){var b,c,d,e,f,g;if(!a.scrollingPage)return f=parseFloat(a.$fbLeft.css("margin-top")),b=$(window).scrollTop()-a.$el.offset().top+60,d=a.$responseFields.height(),e=Math.max(0,Math.min(d,b)),c=Math.abs(f-e),g=Math.min(1.5*c,250),a.$fbLeft.animate({"margin-top":e},g)}}(this),100),$(window).on("scroll",function(b){return function(){return b.leftWrapperLocked?void 0:a()}}(this))},initBeforeUnload:function(){return BeforeUnload.enable({"if":function(a){return function(){return a.autosaver.isPending()||!a.isValid()}}(this),cb:function(a){return function(b){return a.isValid()?a.autosaver.ensure(function(){return Turbolinks.visit(b)}):!1}}(this)})},initSortable:function(){return new Sortable(this.$responseFields[0],{group:{name:"responseFields",pull:!1,put:!0},onUpdate:function(a){return function(b){return a._onChange(),a.ensureEditPaneScrolled()}}(this),onAdd:function(a){return function(b){return a.addField($(b.item).data("field-type"),{$replaceEl:$(b.item)}),a._onChange()}}(this)})},initDraggable:function(){var a;return a={group:{name:"responseFields",pull:"clone",put:!1},sort:!1},$(".fb_add_field_section").each(function(){return new Sortable(this,a)})},setLeft:function(a){return"edit"===a?(this.$leftEdit.show(),this.$leftAdd.hide()):(this.removeEditPane(),this.$leftAdd.show(),this.$leftEdit.hide())},lockLeftWrapper:function(){return this.leftWrapperLocked=!0},unlockLeftWrapper:function(){return this.leftWrapperLocked=!1},ensureEditPaneScrolled:function(){return this.editView?this.scrollToField($(".fb_field_wrapper.editing")):void 0},scrollToField:function(a){var b;return a[0]?(this.scrollingPage=!0,b=this.$el.offset().top+a.offset().top-this.$responseFields.offset().top,$.scrollWindowTo(b,200,function(a){return function(){return a.scrollingPage=!1}}(this))):void 0},allFields:function(){return this.$el.find(".fb_field_wrapper")},modelEl:function(a){return this.allFields().filter(function(b,c){return $(c).data("cid")===a.cid})},modelDOMIndex:function(a){return this.allFields().index(this.modelEl(a))},_onCollectionAdd:function(b,c,d){var e,f;return b.set("showOther",!0),f=new a.Views.ViewField({model:b,parentView:this}),null!=d.$replaceEl?d.$replaceEl.replaceWith(f.render().el):null!=d.position&&(e=this.$responseFields.find(".fb_field_wrapper").eq(d.position))[0]?e.before(f.render().el):this.$responseFields.append(f.render().el)},_addFieldViaClick:function(a){var b,c;return c=(b=this.$el.find(".fb_field_wrapper.editing"))[0]?this.$el.find(".fb_field_wrapper").index(b)+1:void 0,this.addField($(a.currentTarget).data("field-type"),{position:c})},addField:function(c,d){var e;return"string"==typeof c&&(c=a.DEFAULT_FIELD_ATTRS(c)),e=b(c),e.typeUnlocked=!0,this.collection.add(e,_.extend(d||{},{sort:!1})),this.collection.sort(),this.collection.validateField(e),this.showEditPane(e)},removeEditPane:function(){var a;return null!=(a=this.editView)&&a.remove(),this.editView=void 0},showEditPane:function(b){var c;if(this.unlockLeftWrapper(),c=this.modelEl(b),c.addClass("editing").siblings(".fb_field_wrapper").removeClass("editing"),this.editView){if(this.editView.model.cid===b.cid)return this.setLeft("edit"),void this.scrollToField(c);this.editView.remove()}return this.editView=new a.Views.EditField({model:b,parentView:this}),this.$el.find(".fb_edit_field_inner").html(this.editView.render().$el),this.setLeft("edit"),this.$el.find('[data-rv-input="model.label"]').focus(),this.scrollToField(c),this},isValid:function(){return this.collection.all(function(a){return a.isValid})},calculateValidation:function(){return this.state.set("hasValidationErrors",!this.isValid()),this.trigger("refreshStatus")},_onChange:function(){return this.autosaver.saveLater(),this.trigger("refreshStatus")}}),a.Views={},a.DEFAULT_FIELD_ATTRS=function(b){var c;return _.extend({label:"Untitled",field_type:b,required:!0,field_options:{}},("function"==typeof(c=a.FIELD_TYPES[b]).defaultAttributes?c.defaultAttributes():void 0)||{})},a.DEFAULT_OPTIONS=function(){return[{label:"Option 1",checked:!1},{label:"Option 2",checked:!1}]},a.options={BUTTON_CLASS:"button small"},a.mappings={SIZE:"field_options.size",UNITS:"field_options.units",LABEL:"label",FIELD_TYPE:"field_type",REQUIRED:"required",ADMIN_ONLY:"admin_only",BLIND:"blind",OPTIONS:"field_options.options",COLUMNS:"field_options.columns",COLUMN_TOTALS:"field_options.column_totals",PRESET_VALUES:"field_options.preset_values",DESCRIPTION:"field_options.description",INCLUDE_OTHER:"field_options.include_other_option",INCLUDE_BLANK:"field_options.include_blank_option",INTEGER_ONLY:"field_options.integer_only",MIN:"field_options.min",MAX:"field_options.max",MINLENGTH:"field_options.minlength",MAXLENGTH:"field_options.maxlength",MINROWS:"field_options.minrows",MAXROWS:"field_options.maxrows",LENGTH_UNITS:"field_options.min_max_length_units",DISABLE_CENTS:"field_options.disable_cents",DISABLE_SECONDS:"field_options.disable_seconds",DEFAULT_LAT:"field_options.default_lat",DEFAULT_LNG:"field_options.default_lng",ADDRESS_FORMAT:"field_options.address_format",FILE_TYPES:"field_options.file_types",CONDITIONS:"field_options.conditions",PHONE_FORMAT:"field_options.phone_format"},e=function(){return{field_options:{size:"medium"}}},a.FIELD_CATEGORIES={Inputs:{text:{name:"Text",icon:"font",defaultAttributes:e},paragraph:{name:"Paragraph",buttonHtml:'<span class="symbol">&#182;</span> Paragraph',defaultAttributes:e},checkboxes:{name:"Checkboxes",icon:"check",defaultAttributes:function(){return{field_options:{options:a.DEFAULT_OPTIONS()}}}},radio:{name:"Multiple Choice",icon:"circle-o",defaultAttributes:function(){return{field_options:{options:a.DEFAULT_OPTIONS()}}}},date:{name:"Date",icon:"calendar"},dropdown:{name:"Dropdown",icon:"caret-down",defaultAttributes:function(){return{field_options:{options:a.DEFAULT_OPTIONS(),include_blank_option:!1}}}},time:{name:"Time",icon:"clock-o",defaultAttributes:function(){return{field_options:{disable_seconds:!0}}}},number:{name:"Numeric",buttonHtml:'<span class="symbol">123</span> Numeric'},phone:{name:"Phone",icon:"phone",defaultAttributes:function(){return{field_options:{phone_format:"us"}}}},website:{name:"Website",icon:"link"},email:{name:"Email",icon:"envelope"},price:{name:"Price",icon:"usd"},address:{name:"Address",icon:"home"},file:{name:"File",icon:"cloud-upload"},table:{name:"Table",icon:"table",defaultAttributes:function(){return{field_options:{columns:[{label:"Column 1"},{label:"Column 2"}]}}}}},Geographic:{map_marker:{name:"Map Marker",icon:"map-marker"}},"Non-input":{section_break:{name:"Section Break",icon:"minus",defaultAttributes:e},page_break:{name:"Page Break",icon:"file"},block_of_text:{name:"Block of Text",icon:"font",defaultAttributes:e}}},a.FIELD_TYPES=_.extend.apply(this,_.union({},_.values(a.FIELD_CATEGORIES))),f={duplicateColumns:function(a){var b;return"table"!==a.field_type?!1:(b=_.map(a.getColumns(),function(a){return a.label}),_.uniq(b).length!==b.length)},minMaxMismatch:function(a){var b,c;return"number"!==a.field_type?!1:(c=parseFloat(a.get("field_options.min")),b=parseFloat(a.get("field_options.max")),c&&b&&c>b?!0:void 0)},minMaxLengthMismatch:function(a){var b,c;return"paragraph"!==a.field_type&&"text"!==a.field_type?!1:(c=parseInt(a.get("field_options.minlength"),10),b=parseInt(a.get("field_options.maxlength"),10),c&&b&&c>b?!0:void 0)},minMaxRowsMismatch:function(a){var b,c;return"table"!==a.field_type?!1:(c=parseInt(a.get("field_options.minrows"),10),b=parseInt(a.get("field_options.maxrows"),10),c&&b&&c>b?!0:void 0)},blankOption:function(a){var b;return"radio"!==(b=a.field_type)&&"checkboxes"!==b&&"dropdown"!==b?!1:_.any(a.getOptions(),function(a){return!a.label})},blankColumn:function(a){return"table"!==a.field_type?!1:_.any(a.getColumns(),function(a){return!a.label})}},a.Collection=Backbone.Collection.extend({initialize:function(a,b){return this.parentView=b.parentView,this.on("add",this.copyCidToModel),this.on("remove",this.removeConditionals),this.on("remove change:isValid",function(a){return function(){return a.parentView.calculateValidation()}}(this)),this.on("change",function(a){return function(b){return a.validateField(b,void 0,b.isValid)}}(this)),this.on("change:field_options.columns change:field_options.columns.*",function(a){return function(b){return a.validateField(b,"duplicateColumns")}}(this))},validateField:function(a,b,c){var d,e,g;if(d=$.extend({},a.get("errors")),b)d[b]=f[b](a);else for(e in f)g=f[e],d[e]=g(a);return a.validationErrors=d,c||a.set("errors",d),a.isValid=!_.any(_.values(d),function(a){return a}),c?void 0:a.set("isValid",a.isValid)},comparator:function(a){return this.parentView.modelDOMIndex(a)},copyCidToModel:function(a){return a.attributes.cid=a.cid},input_fields:function(){return this.models.filter(function(a){return a.input_field})},removeConditionals:function(b){return this.models.forEach(function(c){return function(d){var e,f,g;return(f=d.get(a.mappings.CONDITIONS))&&(e=_.reject(f,function(a){return""+a.response_field_id==""+b.id}),!_.isEqual(f,e))?(d.set(a.mappings.CONDITIONS,e),null!=(g=c.parentView.editView)?g.render():void 0):void 0}}(this))}}),a.Views.ViewField=Backbone.View.extend({className:"fb_field_wrapper",events:{"click .cover":"focusEditView","click .js-duplicate":"duplicate","click [data-hard-remove]":"hardRemove","click [data-soft-remove]":"softRemove",'click [data-toggle="dropdown"]':"setEditing"},initialize:function(a){return this.parentView=a.parentView,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},render:function(){var b;return"function"==typeof(b=this.model).setExistingValue&&b.setExistingValue(null),this.$el.data("cid",this.model.cid).html(JST["form_builder/templates/view/base"]({hasResponses:this.parentView.options.hasResponses,model:this.model})),this.rendererView||(this.rendererView=new(FormRenderer.Views[c(this.model.field_type)])({model:this.model,showLabels:!0})),this.toggleErrorClass(),this.$el.append(this.rendererView.render().el),a.disableTabbing(this.$el),this.$el.initialize(),this.rendererView.trigger("shown"),this},toggleErrorClass:function(){return this.model.get("isValid")===!1?this.$el.addClass("has_errors"):this.$el.removeClass("has_errors")},focusEditView:function(){return this.parentView.showEditPane(this.model)},clearConfirmMsg:function(){return this.model.input_field?"Are you sure you want to delete this field? You'll also lose access to any submitted answers to this field.":void 0},setEditing:function(){return this.$el.hasClass("editing")?void 0:this.parentView.showEditPane(this.model)},hardRemove:function(){return this.parentView.options.hasResponses?$.rails.showConfirmDialog(this.clearConfirmMsg(),$.proxy(this.clear,this)):this.clear()},softRemove:function(){return this.model.set(a.mappings.ADMIN_ONLY,!0),this.model.set(a.mappings.REQUIRED,!1),this.$el.appendTo(this.$el.closest(".fb_response_fields")),this.parentView._onChange(),this.parentView.ensureEditPaneScrolled()},clear:function(){return this.model.destroy()},duplicate:function(){var a,b;return a=_.deepClone(this.model.attributes),delete a.id,a.label+=" Copy",b=this.parentView.addField(a,{position:this.parentView.modelDOMIndex(this.model)+1})}}),a.Views.EditField=Backbone.View.extend({className:"fb_edit_inner",events:{"click .js-add-option":"addOption","click .js-remove-option":"removeOption","change .js-change-field-type":"changeFieldType","click [data-show-modal]":"showModal",'blur [data-rv-input="model.field_options.minlength"]':"auditMinLength",'blur [data-rv-input="model.field_options.maxlength"]':"auditMaxLength",'blur [data-rv-input="model.field_options.min"]':"auditMin",'blur [data-rv-input="model.field_options.max"]':"auditMax",'blur [data-rv-input="model.field_options.minrows"]':"auditMinRows",'blur [data-rv-input="model.field_options.maxrows"]':"auditMaxRows",'blur [data-rv-input^="model.field_options.options."]':"validateField",'blur [data-rv-input^="model.field_options.columns."]':"validateField",'change [data-rv-value="model.field_options.min_max_length_units"]':"setSizeToRecommendedSize","click .js-add-condition":"addCondition","click .js-remove-condition":"removeCondition","click .js-set-checked":"setChecked"},initialize:function(a){return this.parentView=a.parentView,this.listenTo(this.model,"destroy",function(){return this.parentView.removeEditPane(),this.parentView.setLeft("add")}),this.listenTo(this.model,"change:field_options.conditions.*",function(a){return function(b){var c,d,e,f,g,h;for(h=[],c=d=0,f=a.model.getConditions().length-1;f>=0?f>=d:d>=f;c=f>=0?++d:--d)e=null!=(g=a.conditionValueOptions(c))?g[0]:void 0,b.hasChanged("field_options.conditions."+c+".response_field_id")?h.push(a.setCondition(c,{method:a.conditionMethodsAtIndex(c)[0].key,value:e})):b.hasChanged("field_options.conditions."+c+".method")?h.push(a.setCondition(c,{value:e})):h.push(void 0);return h}}(this))},render:function(){var a;return a=this.model.input_field?"base":"base_non_input",this.$el.html(JST["form_builder/templates/edit/"+a](this)),rivets.bind(this.$el,{model:this.model}),this.$el.initialize(),this.model.hasColumnsOrOptions()&&new Sortable(this.$el.find(".fb_options")[0],{handle:".fa-reorder",onUpdate:$.proxy(this._optionsSorted,this)}),this},_optionsSorted:function(){var a;return a=this.$el.find(".fb_options [data-index]").map(function(){return $(this).data("index")}).get(),this.model.orderOptions(a),this.render()},addOption:function(a){return this.model.addOptionOrColumn(),this.render()},removeOption:function(a){var b;return b=this.$el.find(".js-remove-option").index($(a.currentTarget)),this.model.removeOptionOrColumn(b),this.render()},showModal:function(b){var c,d;return d=new(a.Views[$(b.currentTarget).data("show-modal")+"Modal"])({model:this.model,parentView:this}),c=d.render().$el,c.appendTo("body").modal("show"),"function"==typeof d.shown?d.shown():void 0},changeFieldType:function(b){var c,d;return c=a.DEFAULT_FIELD_ATTRS($(b.currentTarget).val()),_.extend(c,_.omit(this.model.attributes,"field_type","field_options")),c.field_options=_.extend({},c.field_options,this.model.attributes.field_options),delete c.value,d=this.parentView.modelDOMIndex(this.model),this.model.set("id",null),this.model.destroy(),this.parentView.addField(c,{position:d})},isChecked:function(a){return this.model.getOptions()[a].checked},setChecked:function(a){var b,c,d;return b=$(a.currentTarget).closest("[data-index]").data("index"),d=this.isChecked(b)?!1:!0,c=$.extend(!0,[],this.model.getOptions()),"checkboxes"===this.model.field_type?c[b].checked=d:_.each(c,function(a,c){return a.checked=c===b?d:!1}),this.model.set(this.model.columnOrOptionKeypath(),c.slice(0)),this.render()},validateField:function(){return this.parentView.collection.validateField(this.model)},auditMinLength:function(){return this.normalizePositiveInteger(a.mappings.MINLENGTH),this.setSizeToRecommendedSize(),this.validateField()},auditMaxLength:function(){return this.normalizePositiveInteger(a.mappings.MAXLENGTH),this.validateField()},auditMin:function(){return this.normalizeFloat(a.mappings.MIN),this.validateField()},auditMax:function(){return this.normalizeFloat(a.mappings.MAX),this.validateField()},auditMinRows:function(){return this.normalizePositiveInteger(a.mappings.MINROWS),this.validateField()},auditMaxRows:function(){return this.normalizePositiveInteger(a.mappings.MAXROWS),this.validateField()},normalizePositiveInteger:function(a){var b,c;return c=this.model.get(a),b=parseInt(c,10),_.isNaN(b)||1>b?this.model.unset(a):this.model.set(a,""+b)},normalizeFloat:function(a){var b,c;return c=this.model.get(a),b=parseFloat(c),_.isNaN(b)?this.model.unset(a):this.model.set(a,""+b)},setSizeToRecommendedSize:function(){var b;return(b=this.recommendedParagraphSize())?(this.model.set(a.mappings.SIZE,b),this.render()):void 0},recommendedParagraphSize:function(){var b,c;return b=parseInt(this.model.get(a.mappings.MINLENGTH)),c="words"===this.model.get(a.mappings.LENGTH_UNITS),c&&b>60||!c&&b>1e3?"large":c&&b>30||!c&&b>350?"medium":void 0},blankCondition:function(){var a,b;return b=this.conditionFieldOptions()[0],{action:"show",response_field_id:b.id,method:_.first(this.conditionMethodsForType(b.field_type)).key,value:null!=(a=d(b))?a[0]:void 0}},addCondition:function(){var b;return b=this.model.getConditions().slice(0),b.push(this.blankCondition()),this.model.set(a.mappings.CONDITIONS,b),this.render()},removeCondition:function(b){var c,d;return d=$(b.currentTarget).data("index"),c=this.model.getConditions().slice(0),c.splice(d,1),this.model.set(a.mappings.CONDITIONS,c),this.render()},conditionField:function(a){var b;return(b=this.model.getConditionAt(a).response_field_id)?this.parentView.collection.find(function(a){return""+a.id==""+b}):void 0},conditionMethod:function(a){return this.model.getConditionAt(a).method},conditionFieldOptions:function(){var a;return a=this.parentView.collection.indexOf(this.model),this.parentView.collection.filter(function(b){return function(c,d){return c.input_field&&b.conditionMethodsForType(c.field_type).length&&a>d}}(this))},conditionMethodsForType:function(b){return _.filter(a.CONDITION_METHODS,function(a){return g.call(a.field_types,b)>=0})},conditionMethodsAtIndex:function(a){var b,c;return(b=null!=(c=this.conditionField(a))?c.field_type:void 0)?this.conditionMethodsForType(b):[]},conditionValueOptions:function(a){return d(this.conditionField(a))},canAddConditions:function(){return this.conditionFieldOptions().length>0},setCondition:function(b,c){var d;return d=this.model.getConditions().slice(0),_.extend(d[b],c),this.model.set(a.mappings.CONDITIONS,d,{silent:!0}),this.render()}}),FormRenderer.Models.ResponseField.prototype.getConditionAt=function(a){return this.getConditions()[a]||{}},FormRenderer.Models.ResponseField.prototype.columnOrOptionKeypath=function(){switch(this.field_type){case"table":return"field_options.columns";case"checkboxes":case"radio":case"dropdown":return"field_options.options"}},FormRenderer.Models.ResponseField.prototype.hasColumnsOrOptions=function(){return!!this.columnOrOptionKeypath()},FormRenderer.Models.ResponseField.prototype.addOptionOrColumn=function(a){var b,c,d;return d="table"===this.field_type?this.getColumns():this.getOptions(),c=d.slice(0),b={label:("table"===this.field_type?"Column":"Option")+" "+(d.length+1)},"table"!==this.field_type&&(b.checked=!1),c.push(b),this.set(this.columnOrOptionKeypath(),c)},FormRenderer.Models.ResponseField.prototype.removeOptionOrColumn=function(a){var b,c;return c=this.get(this.columnOrOptionKeypath()),b=c.slice(0),b.splice(a,1),this.set(this.columnOrOptionKeypath(),b)},FormRenderer.Models.ResponseField.prototype.orderOptions=function(a){var b,c;return c=this.get(this.columnOrOptionKeypath()),b=_.sortBy(c.slice(0),function(b,c){return _.indexOf(a,c)}),this.set(this.columnOrOptionKeypath(),b)},a.CONDITION_METHODS=[{key:"eq",label:"is",field_types:["date","dropdown","email","number","paragraph","price","radio","text","time","website"]},{key:"contains",label:"contains",field_types:["checkboxes","text","paragraph","website","email","address","table"]},{key:"lt",label:"is less than",field_types:["number","price"]},{key:"gt",label:"is greater than",field_types:["number","price"]},{key:"shorter",label:"is shorter than",field_types:["text","paragraph"]},{key:"longer",label:"is longer than",field_types:["text","paragraph"]}],a.Views.BaseModal=Backbone.View.extend({className:"modal",events:{"click button":function(){return this.save(),this.hideAndRemove()},"hidden.bs.modal":"remove"},initialize:function(a){return this.parentView=a.parentView,a},hideAndRemove:function(){return this.$el.modal("hide"),this.remove()}}),a.Views.PresetValuesModal=a.Views.BaseModal.extend({render:function(){return this.$el.html(JST["form_builder/templates/edit/preset_values_modal"]({rf:this.model})),this.$el.initialize(),this},save:function(){return this.model.set(a.mappings.PRESET_VALUES,this.getValues())},getValues:function(){return _.tap({},function(a){return function(b){var c,d,e,f;e=a.model.getColumns(),f=[];for(d in e)c=e[d],f.push(b[c.label]=a.$el.find("[data-col="+d+"]").map(function(){return $(this).val()}).get());return f}}(this))}}),a.Views.DefaultLocationModal=a.Views.BaseModal.extend({render:function(){return this.$el.html(JST["form_builder/templates/edit/default_location_modal"]({rf:this.model})),this.initMap(),this.$el.initialize(),this},initMap:function(){return this.$mapEl=this.$el.find(".fb_default_location_modal_map"),this.map=L.mapbox.map(this.$mapEl[0],App.MAPBOX_TILE_ID,{center:this.model.defaultLatLng()||App.DEFAULT_LAT_LNG,zoom:13})},save:function(){return this.model.set(a.mappings.DEFAULT_LAT,this.map.getCenter().lat.toFixed(7)),this.model.set(a.mappings.DEFAULT_LNG,this.map.getCenter().lng.toFixed(7))},shown:function(){return this.map._onResize()}}),a.Views.BulkAddOptionsModal=a.Views.BaseModal.extend({render:function(){return this.$el.html(JST["form_builder/templates/edit/bulk_add_options_modal"]({rf:this.model})),this.$el.initialize(),this},save:function(){return this.addOptions()},addOptions:function(){var b,c,d,e,f,g;if(g=this.$el.find("textarea").val()){for(e=_.reject(this.model.getOptions(),function(a){return!a.label}),f=g.split("\n"),b=0,c=f.length;c>b;b++)d=f[b],e.push({label:d,checked:!1});return this.model.set(a.mappings.OPTIONS,e),this.parentView.render()}}}),a.StatusIndicatorController=function(){function a(a){_.extend(this,Backbone.Events),this.fb=a.fb,this.$el=$(".save_status"),this.$btn=$(".bottom_status_bar_buttons .continue_button"),this.listenTo(this.fb,"refreshStatus",this.updateClass)}return a.prototype.updateClass=function(){return this.$el.removeClass("is_error is_saving is_invalid"),this.$btn.removeClass("disabled"),this.fb.state.get("hasServerErrors")?this.$el.addClass("is_error"):this.fb.state.get("hasValidationErrors")?(this.$btn.addClass("disabled"),this.$el.addClass("is_invalid")):this.fb.autosaver.isPending()?this.$el.addClass("is_saving"):void 0},a}(),a.disableTabbing=function(a){return a.find("a, button, :input").attr("tabindex","-1")}}).call(this),window.JST||(window.JST={}),window.JST["edit/base.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a;d(b(JST["form_builder/templates/edit/common"](this))),d(b("\n")),d(b(JST["form_builder/templates/edit/checkboxes"](this))),d(b("\n")),d(b("function"==typeof JST[a="form_builder/templates/edit/fields/"+this.model.get(Formbuilder.mappings.FIELD_TYPE)]?JST[a](this):void 0)),d(b("\n")),d(b(JST["form_builder/templates/edit/conditional"](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/base_non_input.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a;d(b("function"==typeof JST[a="form_builder/templates/edit/fields/"+this.model.get(Formbuilder.mappings.FIELD_TYPE)]?JST[a](this):void 0)),d(b("\n\n")),"page_break"!==this.model.field_type&&(d(b("\n  ")),d(b(JST["form_builder/templates/edit/conditional"](this))),d(b("\n"))),d(b("\n\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/columns.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g;for(d(b("<hr />\n\n<div class='fb_edit_section'>\n  <label>Columns</label>\n\n  <div class='fb_options'>\n    ")),g=this.model.getColumns(),a=c=0,e=g.length;e>c;a=++c)f=g[a],d(b("\n      <fieldset class='option drag_list_item' data-index=\"")),d(a),d(b("\">\n        <span class='drag_list_item_box'>\n          <i class='fa fa-reorder drag_list_reorder'></i>\n          <span class='drag_list_item_input'>\n            <input type=\"text\" data-rv-input=\"model.field_options.columns.")),d(a),d(b('.label" />\n          </span>\n        </span>\n        ')),this.model.getColumns().length<2||d(b('\n          <a class="js-remove-option drag_list_remove" title="Remove Column"><i class=\'fa fa-minus-circle\'></i></a>\n        ')),d(b("\n      </fieldset>\n    "));d(b("\n  </div>\n\n  <div class='form_error' data-rv-show='model.errors.duplicateColumns'>You can't have columns with duplicate names.</div>\n  <div class='form_error' data-rv-show='model.errors.blankColumn'>Please enter a label for each column.</div>\n\n  <div class='fb_bottom_add'>\n    <a class=\"js-add-option ")),d(Formbuilder.options.BUTTON_CLASS),d(b('">Add column</a>\n  </div>\n\n  <label class=\'control\'>\n    <input type="checkbox" data-rv-checked="model.')),d(Formbuilder.mappings.COLUMN_TOTALS),d(b("\" />\n    Display column totals for numeric fields\n  </label>\n</div>\n\n<hr />\n\n<div class='fb_edit_section fb_edit_section_horiz fb_edit_section_num_rows fb_edit_section_between'>\n  <label># of rows</label>\n  <div class='fb_edit_section_horiz_content'>\n    <span>Between</span>\n    <input type=\"text\" data-rv-input=\"model.")),d(Formbuilder.mappings.MINROWS),d(b('" />\n    <span>and</span>\n    <input type="text" data-rv-input="model.')),d(Formbuilder.mappings.MAXROWS),d(b("\" />\n  </div>\n</div>\n\n<div class='form_error' data-rv-show='model.errors.minMaxRowsMismatch'>Please enter a maximum larger than the minimum.</div>\n\n<p class='fb_edit_help'>\n  Respondents will be able to add/remove rows within these contraints.\n  You can leave these blank for no limits.\n</p>\n</div>\n\n<hr />\n\n<a class='")),d(Formbuilder.options.BUTTON_CLASS),d(b("' data-show-modal='PresetValues'>Define preset values</a>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/common.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/label"](this))),d(b("\n")),d(b(JST["form_builder/templates/edit/field_type"](this))),d(b("\n")),d(b(JST["form_builder/templates/edit/description"](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/conditional.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(d(b("<hr />\n\n")),this.canAddConditions()||this.model.isConditional()){for(d(b("\n  <div class='fb_edit_section fb_edit_section_conditions'>\n    <label>Rules</label>\n\n    ")),p=this.model.getConditions(),c=e=0,h=p.length;h>e;c=++e){for(a=p[c],d(b("\n      <div class='fb_edit_section_horiz'>\n        <label>\n          ")),d(0===c?b("\n            Only show this field if...\n          "):b("\n            And...\n          ")),d(b("\n        </label>\n\n        <div class='fb_edit_section_horiz_content'>\n          <div class='fb_conditional_opt'>\n            <select data-width=\"100%\" data-rv-value='model.")),d(Formbuilder.mappings.CONDITIONS),d(b(".")),d(c),d(b(".response_field_id'>\n              ")),q=this.conditionFieldOptions(),f=0,i=q.length;i>f;f++)n=q[f],d(b('\n                <option value="')),d(n.id),d(b('">')),d(n.get(Formbuilder.mappings.LABEL)),d(b("</option>\n              "));if(d(b("\n            </select>\n          </div>\n\n          <div class='fb_conditional_opt'>\n            ")),this.conditionField(c)){for(d(b('\n              <select data-width="100%" data-rv-value=\'model.')),d(Formbuilder.mappings.CONDITIONS),d(b(".")),
d(c),d(b(".method'>\n                ")),r=this.conditionMethodsAtIndex(c),g=0,j=r.length;j>g;g++)m=r[g],d(b('\n                  <option value="')),d(m.key),d(b('">')),d(m.label),d(b("</option>\n                "));d(b("\n              </select>\n            "))}if(d(b("\n          </div>\n\n          <div class='fb_conditional_opt'>\n            ")),this.conditionMethod(c)){if(d(b("\n              ")),"dropdown"===(s=this.conditionField(c).field_type)||"checkboxes"===s||"radio"===s){for(d(b("\n                <select data-width='100%' data-rv-value=\"model.")),d(Formbuilder.mappings.CONDITIONS),d(b(".")),d(c),d(b('.value">\n                  ')),t=this.conditionValueOptions(c),l=0,k=t.length;k>l;l++)o=t[l],d(b("\n                    <option value='")),d(o),d(b("'>")),d(o),d(b("</option>\n                  "));d(b("\n                </select>\n              "))}else"shorter"===(u=this.conditionMethod(c))||"longer"===u?(d(b("\n                <div class='input_group'>\n                  <input type='text' data-rv-input=\"model.")),d(Formbuilder.mappings.CONDITIONS),d(b(".")),d(c),d(b(".value\">\n                  <span class='input_group_text'>")),d(this.conditionField(c).getLengthValidationUnits()),d(b("</span>\n                </div>\n              "))):(d(b("\n                <input type='text' data-rv-input=\"model.")),d(Formbuilder.mappings.CONDITIONS),d(b(".")),d(c),d(b('.value">\n              ')));d(b("\n            "))}d(b("\n          </div>\n        </div>\n      </div>\n\n      <div class='fb_condition_remove'>\n        <a class='js-remove-condition' data-index=\"")),d(c),d(b('">Remove this rule</a>\n      </div>\n\n      <hr />\n    '))}d(b("\n\n    ")),this.canAddConditions()&&(d(b("\n      <a class='")),d(Formbuilder.options.BUTTON_CLASS),d(b(" info js-add-condition'>Add a rule</a>\n    "))),d(b("\n  </div>\n"))}else d(b("\n  <div class='fb_edit_section'>\n    <label>Want to add a rule?</label>\n    <p class='fb_edit_help'>Select another field to show and hide it based on the answer to this one.</p>\n  </div>\n"));d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/description.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fb_edit_section'>\n  <label>Add a description</label>\n  <textarea data-rv-input='model.")),d(Formbuilder.mappings.DESCRIPTION),d(b("'></textarea>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/field_type.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e;if(d(b("<div class='fb_edit_section'>\n  ")),this.model.typeUnlocked){d(b("\n    <label>Type</label>\n    <select data-width='100%' class='js-change-field-type'>\n      ")),e=Formbuilder.FIELD_TYPES;for(c in e)a=e[c],d(b("\n        <option value='")),d(c),d(b("' ")),this.model.field_type===c&&d(b("selected")),d(b(">\n          ")),d(a.name),d(b("\n        </option>\n      "));d(b("\n    </select>\n  "))}else d(b("\n    <div class='label'>\n      ")),d(Formbuilder.FIELD_TYPES[this.model.field_type].name),d(b("\n    </div>\n  "));d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/address.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<hr />\n\n<div class='fb_edit_section fb_edit_section_horiz'>\n  <label>Format</label>\n  <div class='fb_edit_section_horiz_content'>\n    <select data-width='auto' data-rv-value=\"model.")),d(Formbuilder.mappings.ADDRESS_FORMAT),d(b("\">\n      <option value=''>All fields</option>\n      <option value='city_state'>City and State only</option>\n      <option value='city_state_zip'>City, State and ZIP Code only</option>\n      <option value='country'>Country only</option>\n    </select>\n  </div>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/block_of_text.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fb_edit_section fb_edit_section_label'>\n  <label>Text</label>\n  <textarea data-rv-input='model.")),d(Formbuilder.mappings.DESCRIPTION),d(b("'></textarea>\n</div>\n\n")),d(b(JST["form_builder/templates/edit/field_type"](this))),d(b("\n")),d(b(JST["form_builder/templates/edit/size"](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/checkboxes.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/options"](_.extend(this,{includeOther:!0}))))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/dropdown.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/options"](_.extend(this,{includeBlank:!0})))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/file.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<hr />\n\n<div class='fb_edit_section fb_edit_section_horiz'>\n  <label>Allow users to upload...</label>\n  <div class='fb_edit_section_horiz_content'>\n    <select data-rv-value=\"model.")),d(Formbuilder.mappings.FILE_TYPES),d(b("\" data-width=\"70%\">\n      <option value=''>Any type of file</option>\n      <option value='images'>Images only</option>\n      <option value='audio'>Audio files only</option>\n      <option value='videos'>Videos only</option>\n      <option value='docs'>Documents only</option>\n    </select>\n  </div>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/map_marker.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/default_location"]()))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/number.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/min_max"]())),d(b("\n")),d(b(JST["form_builder/templates/edit/units"]())),d(b("\n")),d(b(JST["form_builder/templates/edit/integer_only"]())),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/page_break.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.model.typeUnlocked?(d(b("\n  ")),d(b(JST["form_builder/templates/edit/field_type"](this))),d(b("\n"))):d(b("\n  <p class='fb_edit_help'>No options available</p>\n")),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/paragraph.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/size"]())),d(b("\n")),d(b(JST["form_builder/templates/edit/min_max_length"]())),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/phone.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<hr />\n\n<div class='fb_edit_section fb_edit_section_horiz'>\n  <label>Format</label>\n  <div class='fb_edit_section_horiz_content'>\n    <select data-width=\"100%\" data-rv-value=\"model.")),d(Formbuilder.mappings.PHONE_FORMAT),d(b('">\n      <option value="us">US (10-digit)</option>\n      <option value="intl">International</option>\n    </select>\n  </div>\n</div>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/price.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/disable_cents"]())),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/radio.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/options"](_.extend(this,{includeOther:!0})))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/section_break.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/common"](this))),d(b("\n")),d(b(JST["form_builder/templates/edit/size"](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/table.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/columns"](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/text.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/size"]())),d(b("\n")),d(b(JST["form_builder/templates/edit/min_max_length"]())),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/fields/time.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["form_builder/templates/edit/disable_seconds"]())),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/label.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fb_edit_section fb_edit_section_label'>\n  <label>Label</label>\n  <input type='text' data-rv-input='model.")),d(Formbuilder.mappings.LABEL),d(b("' />\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["edit/options.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g,h;for(a="checkboxes"===this.model.field_type?"checkbox":"radio",d(b("\n\n<hr />\n\n<div class='fb_edit_section'>\n  <label>Options</div>\n\n  ")),null!=this.includeBlank&&(d(b("\n    <div class='fb_option_blank'>\n      <label class='control'>\n        <input type='checkbox' data-rv-checked='model.")),d(Formbuilder.mappings.INCLUDE_BLANK),d(b("' />\n        Include blank\n      </label>\n    </div>\n  "))),d(b("\n\n  <div class='fb_options'>\n    ")),h=this.model.getOptions(),c=e=0,f=h.length;f>e;c=++e)g=h[c],d(b("\n      <fieldset class='option drag_list_item drag_list_item_checkbox' data-index=\"")),d(c),d(b("\">\n        <span class='drag_list_item_box'>\n          <i class='fa fa-reorder drag_list_reorder'></i>\n          <label class=\"control\">\n            <input type=\"")),d(a),d(b("\" class='js-set-checked' ")),d(this.isChecked(c)?"checked":void 0),d(b(' />\n          </label>\n          <span class=\'drag_list_item_input\'>\n            <input type="text" data-rv-input="model.field_options.options.')),d(c),d(b('.label" />\n          </span>\n        </span>\n        ')),this.model.getOptions().length<2||d(b('\n          <a class="js-remove-option drag_list_remove" title="Remove Option"><i class=\'fa fa-minus-circle\'></i></a>\n        ')),d(b("\n      </fieldset>\n    "));d(b("\n  </div>\n\n  <div class='form_error' data-rv-show='model.errors.blankOption'>Please enter text for each option.</div>\n\n  <div class='fb_bottom_add'>\n    <a class=\"js-add-option button_uppercase align_left\"><i class=\"fa fa-plus-circle\"></i> Add an option</a>\n\n    <div class='font_smaller align_right'>\n      <a data-show-modal='BulkAddOptions'>Add in bulk</a>\n    </div>\n  </div>\n\n  ")),null!=this.includeOther&&(d(b("\n    <div class=\"fb_option_other\">\n      <label class='control'>\n        <input type='checkbox' data-rv-checked='model.")),d(Formbuilder.mappings.INCLUDE_OTHER),d(b('\' />\n        Include "other"\n      </label>\n    </div>\n  '))),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/left_side.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g;d(b("<div class='fb_left'>\n  <div class='fb_add_field_wrapper'>\n    <div class='fb_left_header'>\n      <h4>Add a new field</h4>\n    </div>\n\n    ")),f=Formbuilder.FIELD_CATEGORIES;for(g in f){c=f[g],d(b("\n      <h5>")),d(g),d(b("</h5>\n      <div class='fb_add_field_section'>\n        "));for(e in c)a=c[e],d(b('\n          <a data-field-type="')),d(e),d(b('" class="')),d(Formbuilder.options.BUTTON_CLASS),d(b('">\n            ')),a.buttonHtml?(d(b("\n              ")),d(b(a.buttonHtml)),d(b("\n            "))):(d(b('\n              <span class="symbol"><span class="fa fa-')),d(a.icon),d(b('"></span></span>\n              ')),d(a.name),d(b("\n            "))),d(b("\n          </a>\n        "));d(b("\n      </div>\n    "))}d(b("\n  </div>\n\n  <div class='fb_edit_field_wrapper' style='display:none;'>\n    <div class='fb_left_header'>\n      <h4>Edit field</h4>\n      <a class='js-add-field button small info'>Add a new field</a>\n    </div>\n\n    <div class='fb_edit_field_inner'></div>\n  </div>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["view/base.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='cover'></div>\n")),d(b(JST["form_builder/templates/view/duplicate_remove"](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["view/duplicate_remove.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='actions_wrapper'>\n  <button class=\"js-duplicate fb_button_success ")),d(Formbuilder.options.BUTTON_CLASS),d(b('" title="Duplicate Field"><i class=\'fa fa-plus-circle\'></i></button>\n\n  ')),this.hasResponses&&this.model.input_field?(d(b("\n    <span class='dropdown'>\n      <a class=\"js-clear fb_button_warn ")),d(Formbuilder.options.BUTTON_CLASS),d(b("\" data-toggle=\"dropdown\" title=\"Remove field...\">\n        <i class='fa fa-minus-circle'></i>\n      </a>\n      <div class='dropdown_menu dropdown_right'>\n        <ul class='dropdown_body'>\n          ")),this.model.get("admin_only")||d(b("\n            <li><a data-soft-remove>Hide this field</a></li>\n          ")),d(b("\n          <li><a data-hard-remove>Delete this field and its answers</a></li>\n        </ul>\n      </div>\n    </span>\n  "))):(d(b('\n    <a class="js-clear fb_button_warn ')),d(Formbuilder.options.BUTTON_CLASS),d(b('" data-hard-remove title="Remove field...">\n      <i class=\'fa fa-minus-circle\'></i>\n    </a>\n  '))),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())};